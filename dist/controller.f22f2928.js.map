{"version":3,"sources":["js/model.js","js/views/gameView.js","js/views/headerView.js","js/helpers.js","js/config.js","js/controller.js"],"names":["TIME","state","lives","scores","play","time","clicked","resetGame","startGame","addScore","reduceLives","reduceTime","gameView","document","querySelector","_squareContainer","children","param","classList","remove","_activeClassName","square","createElement","add","number","i","createSquare","appendChild","handler","_btnStart","addEventListener","_btnReset","bind","setAttribute","removeAttribute","hasAttribute","_infoDiv","innerHTML","HeaderView","data","_lives","textContent","_scores","_time","drawNumber","value","min","max","Math","floor","random","HOW_MANY_SQUARES","DELAY","DRAW_INTERVAL","drawIntervalId","startTimer","tick","isEndOfGame","clearInterval","timer","headerView","updateTime","model","setInterval","drawGreenSquare","greenNumber","setTimeout","removeActiveClass","addActiveClass","el","decreaseLives","checkSquare","target","contains","updateScores","render","checkDisabled","showEndMessage","deactivateStartButton","showWelcomeMessage","init","addHandlerStartClick","addHandlerResetClick","activateStartButton","addHandlerSquareClick","showSquares"],"mappings":"AKAA;;AACA;;AACA;;ADFO,ACGP,ALHO,IIAMmD,AJAAnD,IAAI,GAAG,EAAb,OIAsB,GAAG,EAAzB;ADAA,IAAM4C,UAAU,GAAG,SAAbA,UAAa,CAAUC,KAAV,EAAiB;ACCpC,ACGP,AFHE,AHAK,IIAMO,AJAAnD,EGAL6C,GCAU,ADAP,AHAO,GIAG,ADAP,AHAO,CGAnB,GCAK;ADCL,AHAA5C,EAAAA,IGAM6C,CHAD,EGAI,AHAF,CADY,EGCPF,KAAZ;ACAK,ACGP,AFFE,AHAA1C,EAAAA,EIDWkD,IJCL,CGACL,CHAC,CAFW,EGER,CAACC,GCDY,EDCjB,CCDoB,ADCTD,ICDb,ADCiB,CAACE,MAAL,MAAiBH,GAAG,GAAGD,GAAvB,IAA8BA,GAAzC,CAAP;AACD,AHAC1C,CGJK,CHILA,IAAI,EAAE,KAHa;AAInBC,EAAAA,IAAI,EAAEL,IAJa;AAKnBM,EAAAA,OAAO,EAAE;AALU,CAAd;IEDDgC;;AFSC,IAAM/B,ACTPK,SDSgB,GAAG,SAAZL,SAAY,GAAY;AKFrC,ALGE,IKHE+C,GLGGrD,KAAL,GAAa,GKHf;ALIIC,IAAAA,KAAK,EAAE,CADI,wBETJW,QAAQ,CAACC,aAAT,CAAuB,QAAvB;AGQX,ALGIX,IKHEoD,ALGFpD,MAAM,EAAE,CAFG,CKDC,GAAG,SAAboD,UAAa,GAAY;AAC7B,ALGEnD,IAAAA,EKHIoD,ELGA,EKHI,ALGF,GKHK,ELAA,OKAPA,IAAO,GAAM,QHRT3C,EDDEA,MCCM,CAACC,CDDC,CAACA,WCCX,CAAuB,CDDrB,CAAuB,OCCzB,MDDE;AIUV,ALGAT,IAAAA,IKHIoD,ALGA,EAAEzD,IAJK,KKCI,EAAf,EAAmB;AACjB0D,ALGFpD,IAAAA,EKHEoD,KLGK,EAAE,MKHM,CAACJ,cAAD,CAAb,AHTIzC,IDDIA,ICCI,CAACC,GDDG,CAACA,SCCb,CAAuB,GDDnB,CAAuB,ICC3B,SDDI;AIWR4C,ALHS,GAAb,GKGIA,aAAa,CAACC,KAAD,CAAb;AACA,ALGL,CARM,6CCNc9C,QAAQ,CAACC,aAAT,CAAuB,oBAAvB;AIYhB,KAJD,MAIO;AACL8C,0BAAWC,UAAX,CAAsBC,CJZf,IIYoB,CAAC7D,AJZhBc,KIYU,CAAYV,IAAlC,MJZO,CAAsBW;WCCjC,gBAAOuB,IAAP,EAAa;AGYTuB,ALEC,AEdQ,IFcFtD,EKFPsD,IHXM5D,CGWD,CAACS,CLEU,EEdP,CFcU,EEbW4B,IGW9B,AHZS,CACHrC,EFaCM,GEdE,MFcU,GAAY,CCdxBK,QAAQ,CAACC,aAAT,CAAuB,OAAvB;AIaR,ALEH,AEfa,OFeRb,GEdYE,EFcjB,CAAWC,GEfE,CFeb,EEdkCmC,CFchB,GEfL,CFeb,AEdiBpC,MADJ;AGcZ,ALEF,AEhBc,CFcR,EKTL,OHJyBE,IADZ,GACqBkC,IADrB,CACYlC,IADZ,oBDCM;ACCjB,WAAKmC,MAAL,CAAYC,WAAZ,GAA0BvC,KAA1B;AGcFsD,AHbE,EGaFA,IAAI,KHbGd,OAAL,CAAaD,WAAb,GAA2BtC,MAA3B,QDiCkB,UAAUc,KAAV,EAAiB;AInBrC,AJoBE,ACjCA,MGaI0C,IJoBA,CIpBK,AJoBJ1C,ACjCA0B,GGaOoB,EJoBZ,ACjCA,CAAWtB,CDiCC,OIpBW,CAACe,EHbxB,EGauB,CHbEnD,CGaK,GHb9B,CGauB,CAAzB;AACD,ALAM,ACoBH,ACjCD,CGDH,GLcaI,MCoBL,EDpBa,GAAG,GCoBTQ,KAAP,CDpBKR,KCoBY,GDpBD,GAAY,ECoBhC,EACEQ,KAAK,CAACC,SAAN,CAAgBC,MAAhB,CAAuB,KAAKC,gBAA5B;ADpBJ,ACqBE,ODrBGnB,GCqBC,EDrBN,CAAWE,ICqBEc,EDrBb,GCqBM,KAAiB,QAArB,EACE,KAAKF,gBAAL,CAAsBC,QAAtB,CAA+BC,KAA/B,EAAsCC,SAAtC,CAAgDC,MAAhD,CACE,KAAKC,gBADP;AIrBN,ALAC,ACwBE,CD1BI,GKED4C,eAAe,GAAG,SAAlBA,eAAkB,GAAY;AAClC,MAAIP,KHdJ,MGce,EAAf,EAAmB,WHdPlB,IAAZ,EAAkB;AGgBlBuB,AHfE,EGeFA,KAAK,CAAC7D,GHfCuC,EGeP,CAAYlC,GHfV,CAAYmC,GGed,GAAsB,KAAtB,AHfE,GAA0BF,IAA1B,MDsCa,YAAY;AIrB3B,AJsBE,ACtCD,MGgBK0B,IJsBE5C,MAAM,CItBG,EJsBAR,CItBG,OJsBK,CAACS,aAAT,CAAuB,GItBT6B,EJsBd,CAAf,qBItBkB,CAApB;AAEAe,ALLK,AC0BH7C,EIrBF6C,ELLWxD,EC0BTW,MIrBQ,AJqBF,CIrBG8C,AJqBFjD,ED1Ba,GAAG,IC0BvB,CAAiBK,GAAjB,CD1BSb,AC0BY,GIrBb,EAAoB0C,GJqB5B,GD1BuB,GAAY,IKK3B,EAA2Ba,WAA3B,CAAV;ALJA,AC0BE,OD1BGhE,KAAL,CAAWC,AC0BFmB,KD1BT,CC0BE;AIpBFT,ALLD,AC0BE,CD5BI,UEXL,SGkBSwD,aHlBI7B,CGkBb,CAAwB0B,EHlBxB,EAAmB,OGkBnB;AACD,AHlBG,CGQJ,UHRSvB,OAAL,CAAaD,WAAb,GAA2BF,IAA3B;AACD,yCDuCa,UAAUf,MAAV,EAAkB;AIpBlC,AJqBI,IIrBE2C,OJqBG,IAAI1C,CAAC,GAAG,CAAb,CIrBmB,CJqBHA,CAAC,CIrBK,EJqBFD,MAApB,CIrBE2C,CJqB0B1C,CAAC,EAA7B,EAAiC,WIrBX,CAAU4C,EAAV,EAAc;AACtC,ALPK,AC4BD,ID5BO1D,EKOP,CAACmD,KAAK,AJqBFzC,CIrBGpB,CLPU,GAAG,CKOnB,AJqBS,CIrBGK,EJqBA,KIrBjB,ALPWK,AC4BWe,EIrBI4C,QLPF,EC4BP,CD5BmB,CC4BhC,CIrBmC;ALNvC,OAAKrE,IEZL,CFYA,CAAWI,IAAX,cEZWkC,IAAX,EAAiB;AGmBjB3B,ALND,AC2BK,ACvCF,CFUG,UEVE+B,EDuCE5B,GCvCP,CAAW0B,GGkBJ0B,QHlBP,CDuCE,CAAsBxC,CCvCCY,IAAzB,EGkBF,CAA2B8B,EAA3B,CJqBI,CAAkChD,MAAlC;AIpBL,AJqBI,ACvCF,CGeH;;AAKA,AJoBI,IIpBEkD,SJoBK,EIpBM,GAAG,AJoBJxD,SIpBVwD,OJoBF,IIpBgB,CAAUF,EAAV,EAAc;AAChC,AJoBC,MIpBGZ,WAAW,EAAf,EAAmB;AAEnBK,EAAAA,KAAK,CAAC7D,KAAN,CAAYK,OAAZ,GAAsB,IAAtB;;AAEA,MAAI+D,EAAE,CAACG,MAAH,AHtBS,CGsBCtD,GHtBGoB,MGsBb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","file":"controller.f22f2928.js","sourceRoot":"..","sourcesContent":["export const TIME = 30;\r\nexport const state = {\r\n  lives: 3,\r\n  scores: 0,\r\n  play: false,\r\n  time: TIME,\r\n  clicked: false,\r\n};\r\n\r\nexport const resetGame = function () {\r\n  this.state = {\r\n    lives: 3,\r\n    scores: 0,\r\n    play: false,\r\n    time: TIME,\r\n    clicked: false,\r\n  };\r\n};\r\n\r\nexport const startGame = function () {\r\n  this.state.play = true;\r\n};\r\n\r\nexport const addScore = function () {\r\n  this.state.scores++;\r\n};\r\n\r\nexport const reduceLives = function () {\r\n  this.state.lives--;\r\n};\r\n\r\nexport const reduceTime = function () {\r\n  this.state.time--;\r\n};\r\n","class gameView {\r\n  _btnStart = document.querySelector(\".btn--start\");\r\n  _btnReset = document.querySelector(\".btn--reset\");\r\n  _squareContainer = document.querySelector(\".square__container\");\r\n  _squares = this._squareContainer.children;\r\n  _infoDiv = document.querySelector(\"#info\");\r\n  _activeClassName = \"active--square\";\r\n\r\n  addHandlerStartClick(handler) {\r\n    this._btnStart.addEventListener(\"click\", handler);\r\n  }\r\n\r\n  addHandlerResetClick(handler) {\r\n    this._btnReset.addEventListener(\"click\", handler);\r\n  }\r\n\r\n  addHandlerSquareClick(handler) {\r\n    this._squareContainer.addEventListener(\"click\", handler.bind(this));\r\n  }\r\n\r\n  deactivateStartButton() {\r\n    this._btnStart.setAttribute(\"disabled\", \"\");\r\n    this._btnStart.classList.remove(\"btn--start\");\r\n    this._btnStart.classList.add(\"btn--disabled\");\r\n  }\r\n\r\n  activateStartButton() {\r\n    this._btnStart.removeAttribute(\"disabled\");\r\n    this._btnStart.classList.remove(\"btn--disabled\");\r\n    this._btnStart.classList.add(\"btn--start\");\r\n  }\r\n\r\n  checkDisabled() {\r\n    return this._btnStart.hasAttribute(\"disabled\") ? true : false;\r\n  }\r\n\r\n  addActiveClass(number) {\r\n    if (!number) return;\r\n    this._squareContainer.children[number].classList.add(this._activeClassName);\r\n  }\r\n\r\n  removeActiveClass = function (param) {\r\n    if (!param) return;\r\n    if (typeof param === \"object\")\r\n      param.classList.remove(this._activeClassName);\r\n    if (typeof param === \"number\")\r\n      this._squareContainer.children[param].classList.remove(\r\n        this._activeClassName\r\n      );\r\n  };\r\n\r\n  createSquare = function () {\r\n    const square = document.createElement(\"div\");\r\n    square.classList.add(\"square\");\r\n    return square;\r\n  };\r\n\r\n  showSquares = function (number) {\r\n    for (let i = 0; i < number; i++) {\r\n      let square = this.createSquare();\r\n      this._squareContainer.appendChild(square);\r\n    }\r\n    return this._squareContainer;\r\n  };\r\n\r\n  showEndMessage() {\r\n    this._infoDiv.innerHTML = `<p class=\"info--end\">Koniec gry!</p> <p class=\"info\">Kliknij przycisk <span class=\"info--reset\">\"Reset\"</span>, a następnie <span class=\"info--start\">Start\"</span>, aby ponownie rozpocząć.</p>`;\r\n  }\r\n\r\n  showWelcomeMessage() {\r\n    this._infoDiv.innerHTML = `<p class=\"start--message\">Kliknij w <span class=\"info--green\">zielony </span>kwadrat, aby zdobyć punkt.</p>`;\r\n  }\r\n}\r\n\r\nexport default new gameView();\r\n","class HeaderView {\r\n  _lives = document.querySelector(\".lives\");\r\n  _scores = document.querySelector(\".scores\");\r\n  _time = document.querySelector(\".timer\");\r\n\r\n  render(data) {\r\n    const { lives, scores, time } = data;\r\n    this._lives.textContent = lives;\r\n    this._scores.textContent = scores;\r\n    this._time.textContent = time;\r\n  }\r\n\r\n  updateLives(data) {\r\n    this._lives.textContent = data;\r\n  }\r\n\r\n  updateScores(data) {\r\n    this._scores.textContent = data;\r\n  }\r\n\r\n  updateTime(data) {\r\n    this._time.textContent = data;\r\n  }\r\n}\r\n\r\nexport default new HeaderView();\r\n","export const drawNumber = function (value) {\r\n  const min = 1;\r\n  const max = value;\r\n  return Math.floor(Math.random() * (max - min) + min);\r\n};\r\n","export const HOW_MANY_SQUARES = 48;\r\nexport const DELAY = 1000;\r\nexport const DRAW_INTERVAL = 1500;\r\n","\"use strict\";\r\nimport * as model from \"./model.js\";\r\nimport gameView from \"./views/gameView\";\r\nimport headerView from \"./views/headerView.js\";\r\nimport { drawNumber } from \"./helpers\";\r\nimport { HOW_MANY_SQUARES, DELAY, DRAW_INTERVAL } from \"./config.js\";\r\n\r\nlet drawIntervalId;\r\n\r\nconst startTimer = function () {\r\n  const tick = () => {\r\n    if (isEndOfGame()) {\r\n      clearInterval(drawIntervalId);\r\n      clearInterval(timer);\r\n      return;\r\n    } else {\r\n      headerView.updateTime(model.state.time);\r\n      model.reduceTime();\r\n    }\r\n  };\r\n\r\n  tick();\r\n  const timer = setInterval(tick, 1000);\r\n};\r\n\r\nconst drawGreenSquare = function () {\r\n  if (isEndOfGame()) return;\r\n\r\n  model.state.clicked = false;\r\n\r\n  const greenNumber = drawNumber(HOW_MANY_SQUARES);\r\n\r\n  setTimeout(removeActiveClass, DELAY, greenNumber);\r\n\r\n  gameView.addActiveClass(greenNumber);\r\n};\r\n\r\nconst removeActiveClass = function (el) {\r\n  if (!model.state.clicked) decreaseLives();\r\n  gameView.removeActiveClass(el);\r\n};\r\n\r\nconst checkSquare = function (el) {\r\n  if (isEndOfGame()) return;\r\n\r\n  model.state.clicked = true;\r\n\r\n  if (el.target.classList.contains(\"active--square\")) {\r\n    gameView.removeActiveClass(el.target);\r\n    model.addScore();\r\n    headerView.updateScores(model.state.scores);\r\n  } else {\r\n    decreaseLives();\r\n  }\r\n};\r\n\r\nconst decreaseLives = function () {\r\n  model.reduceLives();\r\n  headerView.render(model.state);\r\n};\r\n\r\nconst isEndOfGame = function () {\r\n  const { play, lives, time } = model.state;\r\n  if (lives == 0 || play == false || time == 0) {\r\n    if (gameView.checkDisabled()) gameView.showEndMessage();\r\n    return true;\r\n  } else return false;\r\n};\r\n\r\nconst startGame = function () {\r\n  gameView.deactivateStartButton();\r\n\r\n  gameView.showWelcomeMessage();\r\n\r\n  model.startGame();\r\n\r\n  startTimer();\r\n\r\n  drawIntervalId = setInterval(drawGreenSquare, DRAW_INTERVAL);\r\n};\r\n\r\nconst init = function () {\r\n  model.resetGame();\r\n\r\n  clearInterval(drawIntervalId);\r\n\r\n  gameView.addHandlerStartClick(startGame);\r\n\r\n  gameView.addHandlerResetClick(init);\r\n\r\n  gameView.activateStartButton();\r\n\r\n  headerView.render(model.state);\r\n};\r\n\r\ninit();\r\ngameView.addHandlerSquareClick(checkSquare);\r\ngameView.showSquares(HOW_MANY_SQUARES);\r\n"]}